"use strict";function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var n=Object(t),i=1;i<arguments.length;i++){var a=arguments[i];if(void 0!==a&&null!==a)for(var o=Object.keys(Object(a)),r=0,l=o.length;r<l;r++){var s=o[r],u=Object.getOwnPropertyDescriptor(a,s);void 0!==u&&u.enumerable&&(n[s]=a[s])}}return n}});var DEFAULTOPTION={inline:!1,hot:!0,className:"validate-notice"},debounce=function(){var t=!1,e=void 0;return function(n){e&&clearTimeout(e),e=setTimeout(function(){n(),t=!0},500)}}(),Ajax={get:function(t,e,n){var i="?";if("object"==(void 0===e?"undefined":_typeof(e)))for(var a in e)i=i+a+"="+e[a]+"&";i=i.substr(0,i.length-1);var o=new XMLHttpRequest;o.open("GET",t+i,!0),o.onreadystatechange=function(){(4==o.readyState&&200==o.status||304==o.status)&&n.call(this,o.responseText)},o.send(null)},post:function(t,e,n){var i=new XMLHttpRequest;i.open("POST",t,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4!=i.readyState||200!=i.status&&304!=i.status||n.call(this,i.responseText)},i.send(e)}},Validation=function(){function t(e){_classCallCheck(this,t),this.illegalArray=[],this.option=Object.assign({},DEFAULTOPTION,e),this.inputs=this.option.el.querySelectorAll("[name]"),this.init()}return _createClass(t,[{key:"init",value:function(){var t=this;if(this.option.hot){this.option.submitButton&&(this.disableEvent=document.createEvent("CustomEvent"),this.enableEvent=document.createEvent("CustomEvent"),this.disableEvent.initCustomEvent("disable",!0,!0,{}),this.enableEvent.initCustomEvent("enable",!0,!0,{}),this.option.submitButton.addEventListener("disable",function(t){this.setAttribute("disabled",!0)}),this.option.submitButton.addEventListener("enable",function(t){this.removeAttribute("disabled")}));for(var e=0;e<this.inputs.length;e++)!function(e){t.inputs[e].id=e,t.inputs[e].addEventListener("keyup",function(n){debounce(function(){t.validateData(t.inputs[e],t.option.model[t.inputs[e].name])})})}(e)}this.option.submitButton&&this.option.submitButton.addEventListener("click",function(e){t.validateForm()})}},{key:"validateData",value:function(t,e){var n=!0,i=t,a=e,o="";if(a)return a.required&&i.value.toString().length<=0?(n=!1,o="required"):a.required?a.pattern?new RegExp(a.pattern).test(i.value)||(n=!1,o="pattern"):a.type&&_typeof(i.value)!=a.type&&(n=!1,o="pattern"):i.value.toString().length>0&&(a.pattern?new RegExp(a.pattern).test(i.value)||(n=!1,o="pattern"):a.type&&_typeof(i.value)!=a.type&&(n=!1,o="type")),a.confirm&&a.confirm.value!=i.value&&(n=!1,o="confirm"),n?a.ajax?this.serverValidate(i,a)||(n=!1):this.removeValidateNotice(i):"object"==_typeof(a.notice)?this.validateNotice(i,a.notice[o]):this.validateNotice(i,a.notice),n?(this.illegalArray[i.id]=!0,this.illegalArray.every(function(t){return!!t&&1==t})&&this.option.submitButton.dispatchEvent(this.enableEvent)):(this.illegalArray[i.id]=!1,this.option.submitButton.dispatchEvent(this.disableEvent)),n}},{key:"serverValidate",value:function(t,e){var n=this;Ajax[e.ajax.method](e.ajax.url,_defineProperty({},t.name,t.value),function(i){var a=e.ajax.code[JSON.parse(i)[e.ajax.name]];return a?(n.validateNotice(t,a),!1):(n.removeValidateNotice(t),!0)})}},{key:"validateForm",value:function(){for(var t=this.option.model,e=this.inputs,n=!0,i=0;i<e.length;i++){var a=e[i],o=t[a.name];this.validateData(a,o)||n&&(n=!1)}return n}},{key:"validateNotice",value:function(t,e){var n=void 0,i=void 0;(n=(i=this.option.inline?t.parentElement.parentElement:t.parentElement).querySelector("."+this.option.className))||((n=document.createElement("div")).className=this.option.className,i.appendChild(n)),this.option.inline&&(n.style.display="inline-block",n.style.padding="0 10px"),n.innerHTML='<p style="background:#ffd7d7;\n\t\tcolor:#f55;\n\t\tline-height:26px;\n\t\tfont-size:12px;\n\t\ttext-align:left;\n\t\tpadding: 0 10px;\n    \tborder-radius: 2px;\n    \tborder: 1px solid #ffc8c8;">'+e+"</p>"}},{key:"removeValidateNotice",value:function(t){var e=void 0,n=(e=this.option.inline?t.parentElement.parentElement:t.parentElement).querySelector("."+this.option.className);n&&e.removeChild(n)}}]),t}();exports.default=Validation;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm15VmFsaWRhdGlvbi5qcyJdLCJuYW1lcyI6WyJPYmplY3QiLCJhc3NpZ24iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwidGFyZ2V0IiwiZmlyc3RTb3VyY2UiLCJ1bmRlZmluZWQiLCJUeXBlRXJyb3IiLCJ0byIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJuZXh0U291cmNlIiwia2V5c0FycmF5Iiwia2V5cyIsIm5leHRJbmRleCIsImxlbiIsIm5leHRLZXkiLCJkZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiREVGQVVMVE9QVElPTiIsImlubGluZSIsImhvdCIsImNsYXNzTmFtZSIsImRlYm91bmNlIiwiZGViIiwidGltZW91dCIsImZuIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIkFqYXgiLCJnZXQiLCJ1cmwiLCJkYXRhIiwicXVlcnkiLCJfdHlwZW9mIiwiZCIsInN1YnN0ciIsIm9iaiIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJjYWxsIiwidGhpcyIsInJlc3BvbnNlVGV4dCIsInNlbmQiLCJwb3N0Iiwic2V0UmVxdWVzdEhlYWRlciIsIlZhbGlkYXRpb24iLCJvcHRpb24iLCJfY2xhc3NDYWxsQ2hlY2siLCJpbGxlZ2FsQXJyYXkiLCJpbnB1dHMiLCJlbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbml0IiwiX3RoaXMiLCJzdWJtaXRCdXR0b24iLCJkaXNhYmxlRXZlbnQiLCJkb2N1bWVudCIsImNyZWF0ZUV2ZW50IiwiZW5hYmxlRXZlbnQiLCJpbml0Q3VzdG9tRXZlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImlkIiwidmFsaWRhdGVEYXRhIiwibW9kZWwiLCJuYW1lIiwidmFsaWRhdGVGb3JtIiwidmFsaWRhdGUiLCJhIiwibSIsImVyclR5cGUiLCJyZXF1aXJlZCIsInRvU3RyaW5nIiwicGF0dGVybiIsIlJlZ0V4cCIsInRlc3QiLCJ0eXBlIiwiY29uZmlybSIsImFqYXgiLCJzZXJ2ZXJWYWxpZGF0ZSIsInJlbW92ZVZhbGlkYXRlTm90aWNlIiwibm90aWNlIiwidmFsaWRhdGVOb3RpY2UiLCJldmVyeSIsImRpc3BhdGNoRXZlbnQiLCJfdGhpczIiLCJtZXRob2QiLCJfZGVmaW5lUHJvcGVydHkiLCJyZXMiLCJjb2RlIiwiSlNPTiIsInBhcnNlIiwiYWxsVmFsaWRhdGUiLCJkb21Ob3RpY2UiLCJwYXJlbnQiLCJwYXJlbnRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInN0eWxlIiwiZGlzcGxheSIsInBhZGRpbmciLCJpbm5lckhUTUwiLCJyZW1vdmVDaGlsZCJdLCJtYXBwaW5ncyI6IjR3QkFnQ0tBLE9BQU9DLFFBQ1ZELE9BQU9FLGVBQWVGLE9BQVEsVUFDNUJHLFlBQVksRUFDWkMsY0FBYyxFQUNkQyxVQUFVLEVBQ1ZDLE1BQU8sU0FBU0MsRUFBUUMsR0FFdEIsUUFBZUMsSUFBWEYsR0FBbUMsT0FBWEEsRUFDMUIsTUFBTSxJQUFJRyxVQUFVLDJDQUV0QixJQUFLLElBRERDLEVBQUtYLE9BQU9PLEdBQ1BLLEVBQUksRUFBR0EsRUFBSUMsVUFBVUMsT0FBUUYsSUFBSyxDQUN6QyxJQUFJRyxFQUFhRixVQUFVRCxHQUMzQixRQUFtQkgsSUFBZk0sR0FBMkMsT0FBZkEsRUFFaEMsSUFBSyxJQUREQyxFQUFZaEIsT0FBT2lCLEtBQUtqQixPQUFPZSxJQUMxQkcsRUFBWSxFQUFHQyxFQUFNSCxFQUFVRixPQUFRSSxFQUFZQyxFQUFLRCxJQUFhLENBQzVFLElBQUlFLEVBQVVKLEVBQVVFLEdBQ3BCRyxFQUFPckIsT0FBT3NCLHlCQUF5QlAsRUFBWUssUUFDMUNYLElBQVRZLEdBQXNCQSxFQUFLbEIsYUFBWVEsRUFBR1MsR0FBV0wsRUFBV0ssS0FHeEUs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VyxLQUFLQyxLQUFLQyxNQUFNSCxHQUFLeEIsRUFBTWMsS0FBS2IsT0FDdEQsT0FBR2dCLEdBQ0ZJLEVBQUtILGVBQWVsQyxFQUFHaUMsSUFDaEIsSUFFUEksRUFBS0wscUJBQXFCaEMsSUFDbkIsNENBaUJOLElBQUksSUFSRmdCLEVBQU8xQixLQUFLTSxPQUFab0IsTUFHRWpCLEVBQU9ULEtBQUtTLE9BQ1o2QyxHQUFZLEVBSVIxRixFQUFFLEVBQUdBLEVBQUU2QyxFQUFPM0MsT0FBUUYsSUFBSSxDQUVoQyxJQUFJa0UsRUFBRXJCLEVBQU83QyxHQUNUbUUsRUFBRUwsRUFBTUksRUFBRUgsTUFJVjNCLEtBQUt5QixhQUFhSyxFQUFFQyxJQUNuQnVCLElBQ0RBLEdBQVksR0FNbEIsT0FBT0EseUNBS0k1QyxFQUFHaUMsR0FFakIsSUFBSVksT0FBQUEsRUFDQUMsT0FBQUEsR0FRSkQsR0FMQ0MsRUFERXhELEtBQUtNLE9BQU85QixPQUNQa0MsRUFBRytDLGNBQWNBLGNBRWQvQyxFQUFHK0MsZUFHR0MsY0FBYyxJQUFJMUQsS0FBS00sT0FBTzVCLGVBSTFDNkUsRUFBVXZDLFNBQVMyQyxjQUFjLFFBQ3ZCakYsVUFBVXNCLEtBQUtNLE9BQU81QixVQUNoQzhFLEVBQU9JLFlBQVlMLElBR2xCdkQsS0FBS00sT0FBTzlCLFNBQ2pCK0UsRUFBVU0sTUFBTUMsUUFBUSxlQUN4QlAsRUFBVU0sTUFBTUUsUUFBUSxVQUd0QlIsRUFBVVMsVUFBVix3TUFPOEJyQixFQVA5QixvREFZaUJqQyxHQUNwQixJQUFJOEMsT0FBQUEsRUFNQUQsR0FKSEMsRUFERXhELEtBQUtNLE9BQU85QixPQUNQa0MsRUFBRytDLGNBQWNBLGNBRWpCL0MsRUFBRytDLGVBRVVDLGNBQWMsSUFBSTFELEtBQUtNLE9BQU81QixXQUNoRDZFLEdBQ0ZDLEVBQU9TLFlBQVlWLDRCQTVQRGxEIiwiZmlsZSI6Im15VmFsaWRhdGlvbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL1xyXG4vL1xyXG4vLyBvcHRpb249e1xyXG4vLyBcdGVsOifooajljZVlbGVtZW50JywgICAgICAgICAgICAvL+ihqOWNlSBkb21cclxuLy9cclxuLy8gXHRtb2RlbDp7ICAgICAgICAgICAgICAgICAgICAgIC8v6KGo5Y2V5pWw5o2u5qih5Z6LIOinhOWImVxyXG4vLyBcdFx0J3VzZXJuYW1lJzp7XHJcbi8vIFx0XHRcdHJlcXVpcmVkOnRydWUsICAgICAgIC8v5piv5ZCm5b+F6aG7IFxyXG4vLyBcdFx0XHRwYXR0ZXJuOi9bYS16XXs1LTl9LywvL+ato+WImeWMuemFjVxyXG4vL1x0XHRcdGNvbmZpcm06JycgICAgICAgICAgIC8v5LiO5p+Q5LiA5a2X5q616YeN5aSN77yM5bi46KeB5a+G56CB56Gu6K6kIO+8jGRvbVxyXG4vLyBcdFx0XHRub3RpY2U6eyAgICAgICAgICAgICAvL+mUmeivr+aPkOekuu+8jG9iamVjdHx8c3RyaW5nXHJcbi8vIFx0XHRcdFx0cmVxdWlyZWQ6J3VzZXJuYW1lIGlzIHJlcXVpcmVkJyxcclxuLy8gXHRcdFx0XHRwYXR0ZXJuOid1c2VybmFtZSBlcnJvciBmb3JtYXQnXHJcbi8vIFx0XHRcdH0sXHJcbi8vIFx0XHRcdGFqYXg6eyAgICAgICAgICAgICAgIC8v5pyN5Yqh5Zmo6aqM6K+BXHJcbi8vIFx0XHRcdFx0dXJsOid4eHgnLFxyXG4vL1x0XHRcdFx0bWV0aG9kOnBvc3QsXHJcbi8vXHRcdFx0XHRuYW1lOidjb2RlJyxcdCAvL+i/lOWbnuWtl+auteWQjeensFxyXG4vLyBcdFx0XHRcdGNvZGU6eyAgICAgICAgICAgLy/kuI3lkIzplJnor6/noIHlr7nlupTplJnor6/mj5DnpLpcclxuLy8gXHRcdFx0XHRcdCc0MDAnOid1c2VybmFtZSBlcnJvcidcclxuLy8gXHRcdFx0XHR9XHJcbi8vIFx0XHRcdH1cclxuLy8gXHRcdH1cclxuLy8gXHR9LFxyXG4vL1xyXG4vLyBcdGlubGluZTpmYWxzZSwgICAgICAgICAgICAgICAgLy/mmK/lkKblkIzkuIDooYzmmL7npLogIOm7mOiupOWcqOS4i+aWuVxyXG4vLyBcdGhvdDp0cnVlLCAgICAgICAgICAgICAgICAgICAgLy/ng63mo4DmtYvvvIzljbPml6DpnIDngrnlh7vmj5DkuqTmjInpkq7vvIzovpPlhaXml7bmo4DmtYsgICDpu5jorqR0cnVlXHJcbi8vIFx0c3VibWl0QnV0dG9uOifmj5DkuqTmjInpkq4nLFxyXG4vL1x0Y2xhc3NOYW1lOid2YWxpZGF0ZS1ub3RpY2UnLCAvL+aPkOekuueahGRvbeWFg+e0oGNsYXNzXHJcbi8vIH1cclxuXHJcbi8vUG9sbHlmaWxsXHJcbmlmICghT2JqZWN0LmFzc2lnbikge1xyXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPYmplY3QsIFwiYXNzaWduXCIsIHtcclxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgd3JpdGFibGU6IHRydWUsXHJcbiAgICB2YWx1ZTogZnVuY3Rpb24odGFyZ2V0LCBmaXJzdFNvdXJjZSkge1xyXG4gICAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbClcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgZmlyc3QgYXJndW1lbnQgdG8gb2JqZWN0XCIpO1xyXG4gICAgICB2YXIgdG8gPSBPYmplY3QodGFyZ2V0KTtcclxuICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgbmV4dFNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICBpZiAobmV4dFNvdXJjZSA9PT0gdW5kZWZpbmVkIHx8IG5leHRTb3VyY2UgPT09IG51bGwpIGNvbnRpbnVlO1xyXG4gICAgICAgIHZhciBrZXlzQXJyYXkgPSBPYmplY3Qua2V5cyhPYmplY3QobmV4dFNvdXJjZSkpO1xyXG4gICAgICAgIGZvciAodmFyIG5leHRJbmRleCA9IDAsIGxlbiA9IGtleXNBcnJheS5sZW5ndGg7IG5leHRJbmRleCA8IGxlbjsgbmV4dEluZGV4KyspIHtcclxuICAgICAgICAgIHZhciBuZXh0S2V5ID0ga2V5c0FycmF5W25leHRJbmRleF07XHJcbiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobmV4dFNvdXJjZSwgbmV4dEtleSk7XHJcbiAgICAgICAgICBpZiAoZGVzYyAhPT0gdW5kZWZpbmVkICYmIGRlc2MuZW51bWVyYWJsZSkgdG9bbmV4dEtleV0gPSBuZXh0U291cmNlW25leHRLZXldO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdG87XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcblxyXG5jb25zdCBERUZBVUxUT1BUSU9OPXtcclxuXHRpbmxpbmU6ZmFsc2UsXHJcblx0aG90OnRydWUsXHJcblx0Y2xhc3NOYW1lOid2YWxpZGF0ZS1ub3RpY2UnLFxyXG59O1xyXG5cclxuXHJcbmxldCBkZWJvdW5jZT0oZnVuY3Rpb24gKCl7XHJcblx0bGV0IGRlYj1mYWxzZTtcclxuXHRsZXQgdGltZW91dDtcclxuXHJcblx0cmV0dXJuIChmdW5jdGlvbihmbil7XHJcblxyXG5cdFx0aWYodGltZW91dCl7XHJcblx0XHRcdGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuXHRcdH07XHJcblxyXG5cdFx0dGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRcdGZuKCk7XHJcblx0XHRcdGRlYj10cnVlO1xyXG5cdFx0fSw1MDApO1xyXG5cdH0pO1xyXG59KSgpO1xyXG5cclxudmFyIEFqYXg9e1xyXG4gICAgZ2V0OiBmdW5jdGlvbiAodXJsLGRhdGEsZm4pe1xyXG4gICAgXHR2YXIgcXVlcnk9Jz8nO1xyXG4gICAgXHRpZih0eXBlb2YgZGF0YSA9PSAnb2JqZWN0Jyl7XHJcbiAgICBcdFx0Zm9yKGxldCBkIGluIGRhdGEpe1xyXG4gICAgXHRcdFx0cXVlcnk9cXVlcnkrZCsnPScrZGF0YVtkXSsnJidcclxuICAgIFx0XHR9XHJcbiAgICBcdH1cclxuICAgIFx0cXVlcnk9cXVlcnkuc3Vic3RyKDAscXVlcnkubGVuZ3RoLTEpO1xyXG5cclxuICAgICAgICB2YXIgb2JqPW5ldyBYTUxIdHRwUmVxdWVzdCgpOyAgLy8gWE1MSHR0cFJlcXVlc3Tlr7nosaHnlKjkuo7lnKjlkI7lj7DkuI7mnI3liqHlmajkuqTmjaLmlbDmja4gICAgICAgICAgXHJcbiAgICAgICAgb2JqLm9wZW4oJ0dFVCcsdXJsK3F1ZXJ5LHRydWUpO1xyXG4gICAgICAgIG9iai5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgaWYgKG9iai5yZWFkeVN0YXRlID09IDQgJiYgb2JqLnN0YXR1cyA9PSAyMDAgfHwgb2JqLnN0YXR1cyA9PSAzMDQpIHsgLy8gcmVhZHlTdGF0ZT09NOivtOaYjuivt+axguW3suWujOaIkFxyXG4gICAgICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCBvYmoucmVzcG9uc2VUZXh0KTsgIC8v5LuO5pyN5Yqh5Zmo6I635b6X5pWw5o2uXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIG9iai5zZW5kKG51bGwpO1xyXG4gICAgfSxcclxuICAgIHBvc3Q6IGZ1bmN0aW9uICh1cmwsIGRhdGEsIGZuKSB7XHJcbiAgICAgICAgdmFyIG9iaiA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIG9iai5vcGVuKFwiUE9TVFwiLCB1cmwsIHRydWUpO1xyXG4gICAgICAgIG9iai5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsIFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpOyAvLyDlj5HpgIHkv6Hmga/oh7PmnI3liqHlmajml7blhoXlrrnnvJbnoIHnsbvlnotcclxuICAgICAgICBvYmoub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAob2JqLnJlYWR5U3RhdGUgPT0gNCAmJiAob2JqLnN0YXR1cyA9PSAyMDAgfHwgb2JqLnN0YXR1cyA9PSAzMDQpKSB7ICAvLyAzMDTmnKrkv67mlLlcclxuICAgICAgICAgICAgICAgIGZuLmNhbGwodGhpcywgb2JqLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIG9iai5zZW5kKGRhdGEpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmFsaWRhdGlvbiB7XHJcblxyXG5cdGNvbnN0cnVjdG9yKG9wdGlvbil7XHJcblx0XHQvL+WTquS6m+aVsOaNruaYr+mdnuazlVxyXG5cdFx0dGhpcy5pbGxlZ2FsQXJyYXk9W107XHJcblx0XHR0aGlzLm9wdGlvbj1PYmplY3QuYXNzaWduKHt9LERFRkFVTFRPUFRJT04sb3B0aW9uKTtcclxuXHRcdHRoaXMuaW5wdXRzPXRoaXMub3B0aW9uLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tuYW1lXScpO1xyXG5cdFx0dGhpcy5pbml0KCk7XHJcblx0fVxyXG5cclxuXHRpbml0KCl7XHJcblxyXG5cdFx0Ly8g5aaC5p6c5piv54Ot5qOA5rWLXHJcblx0XHRpZih0aGlzLm9wdGlvbi5ob3Qpe1xyXG5cclxuXHJcblx0XHRcdGlmKHRoaXMub3B0aW9uLnN1Ym1pdEJ1dHRvbil7XHJcblx0XHRcdFx0dGhpcy5kaXNhYmxlRXZlbnQ9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XHJcblx0XHRcdFx0dGhpcy5lbmFibGVFdmVudD1kb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcclxuXHRcdFx0XHR0aGlzLmRpc2FibGVFdmVudC5pbml0Q3VzdG9tRXZlbnQoJ2Rpc2FibGUnLHRydWUsdHJ1ZSx7fSk7XHJcblx0XHRcdFx0dGhpcy5lbmFibGVFdmVudC5pbml0Q3VzdG9tRXZlbnQoJ2VuYWJsZScsdHJ1ZSx0cnVlLHt9KTtcclxuXHJcblx0XHRcdFx0dGhpcy5vcHRpb24uc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2Rpc2FibGUnLCBmdW5jdGlvbihlKXtcclxuXHRcdFx0XHRcdHRoaXMuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsdHJ1ZSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0dGhpcy5vcHRpb24uc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2VuYWJsZScsIGZ1bmN0aW9uKGUpe1xyXG5cdFx0XHRcdFx0dGhpcy5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJylcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHJcblxyXG5cdFx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLmlucHV0cy5sZW5ndGg7IGkrKyl7XHJcblx0XHRcdFx0dGhpcy5pbnB1dHNbaV0uaWQ9aTtcclxuXHRcdFx0XHR0aGlzLmlucHV0c1tpXS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsKGUpID0+IHtcclxuXHRcdFx0XHRcdGRlYm91bmNlKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy52YWxpZGF0ZURhdGEodGhpcy5pbnB1dHNbaV0sdGhpcy5vcHRpb24ubW9kZWxbdGhpcy5pbnB1dHNbaV0ubmFtZV0pXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMub3B0aW9uLnN1Ym1pdEJ1dHRvbiYmdGhpcy5vcHRpb24uc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHJcblx0XHRcdHRoaXMudmFsaWRhdGVGb3JtKCk7XHJcblxyXG5cdFx0fSk7XHJcblxyXG5cclxuXHJcblx0fVxyXG5cclxuXHQvL+mqjOivgeaVsOaNruaYr+WQpuWQiOazlVxyXG5cdHZhbGlkYXRlRGF0YShlbCxtb2RlbCl7XHJcblx0XHRsZXQgdmFsaWRhdGU9dHJ1ZSxcclxuXHRcdFx0YT1lbCxcclxuXHRcdFx0bT1tb2RlbCxcclxuXHRcdFx0ZXJyVHlwZT0nJyxcclxuXHRcdFx0bm90aWNlPScnO1xyXG5cclxuXHQgICAgICAvL+aYr+WQpumcgOimgemqjOivgVxyXG5cdCAgICAgIGlmKCFtKXtcclxuXHQgICAgICBcdHJldHVybjtcclxuXHQgICAgICAvL+WmguaenOW/heWhq+W5tuS4lOWAvOS4uuepulxyXG5cdCAgICAgIH1lbHNlIGlmKG0ucmVxdWlyZWQmJmEudmFsdWUudG9TdHJpbmcoKS5sZW5ndGg8PTApe1xyXG5cclxuXHQgICAgICAgIHZhbGlkYXRlPWZhbHNlO1xyXG5cdCAgICAgICAgZXJyVHlwZT0ncmVxdWlyZWQnO1xyXG5cclxuXHQgICAgICAvL+WmguaenOS4jeaYr+W/heWhqyAgXHJcblx0ICAgICAgfWVsc2UgaWYoIW0ucmVxdWlyZWQpe1xyXG5cclxuXHQgICAgICAgIC8v5YC85LiN5Li656m65YiZ6aqM6K+BXHJcblx0ICAgICAgICBpZihhLnZhbHVlLnRvU3RyaW5nKCkubGVuZ3RoPjApe1xyXG5cdCAgICAgICAgICBcclxuXHQgICAgICAgICAgLy/lpoLmnpzmnInmraPliJnooajovr7lvI/liJnpqozor4HmraPliJlcclxuXHQgICAgICAgICAgaWYobS5wYXR0ZXJuKXtcclxuXHQgICAgICAgICAgICBsZXQgcmVnPW5ldyBSZWdFeHAobS5wYXR0ZXJuKTtcclxuXHQgICAgICAgICAgICBpZighcmVnLnRlc3QoYS52YWx1ZSkpe1xyXG5cdCAgICAgICAgICAgICAgdmFsaWRhdGU9ZmFsc2U7XHJcblx0ICAgICAgICAgICAgICBlcnJUeXBlPSdwYXR0ZXJuJztcclxuXHQgICAgICAgICAgICB9XHJcblxyXG5cdCAgICAgICAgICAvL+WQpuWImemqjOivgXR5cGUgIFxyXG5cdCAgICAgICAgICB9ZWxzZSBpZihtLnR5cGUpe1xyXG5cdCAgICAgICAgICAgIGlmKHR5cGVvZiBhLnZhbHVlICE9IG0udHlwZSl7XHJcblx0ICAgICAgICAgICAgICB2YWxpZGF0ZT1mYWxzZTtcclxuXHQgICAgICAgICAgICAgIGVyclR5cGU9J3R5cGUnO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgfVxyXG5cclxuXHQgICAgICAgIH1cclxuXHJcblx0ICAgICAgLy/lpoLmnpzlv4XloavvvIzlubbkuJTlgLzkuI3kuLrnqbogIFxyXG5cdCAgICAgIH1lbHNle1xyXG5cclxuXHQgICAgICAgIC8v5aaC5p6c5pyJ5q2j5YiZ6KGo6L6+5byP5YiZ6aqM6K+B5q2j5YiZXHJcblx0ICAgICAgICBpZihtLnBhdHRlcm4pe1xyXG5cdCAgICAgICAgICBsZXQgcmVnPW5ldyBSZWdFeHAobS5wYXR0ZXJuKTtcclxuXHQgICAgICAgICAgaWYoIXJlZy50ZXN0KGEudmFsdWUpKXtcclxuXHQgICAgICAgICAgICB2YWxpZGF0ZT1mYWxzZTtcclxuXHQgICAgICAgICAgICBlcnJUeXBlPSdwYXR0ZXJuJztcclxuXHQgICAgICAgICAgfVxyXG5cdCAgICAgICAgfWVsc2UgaWYobS50eXBlKXtcclxuXHQgICAgICAgICAgaWYodHlwZW9mIGEudmFsdWUgIT0gbS50eXBlKXtcclxuXHQgICAgICAgICAgICB2YWxpZGF0ZT1mYWxzZTtcclxuXHQgICAgICAgICAgICBlcnJUeXBlPSdwYXR0ZXJuJztcclxuXHQgICAgICAgICAgfVxyXG5cdCAgICAgICAgfVxyXG5cclxuXHQgICAgICB9XHJcblxyXG5cdCAgICAgIGlmKG0uY29uZmlybSl7XHJcblx0ICAgICAgXHRpZihtLmNvbmZpcm0udmFsdWUgIT0gYS52YWx1ZSl7XHJcblx0ICAgICAgXHRcdHZhbGlkYXRlPWZhbHNlO1xyXG5cdCAgICAgIFx0XHRlcnJUeXBlPSdjb25maXJtJztcclxuXHQgICAgICBcdH1cclxuXHQgICAgICB9XHJcblxyXG5cdCAgICAgIC8v5pys5Zyw6aqM6K+B5a6M5q+V5ZCOXHJcblx0ICAgICAgaWYodmFsaWRhdGUpe1xyXG5cdCAgICAgIFx0aWYobS5hamF4KXtcclxuXHQgICAgICBcdFx0Ly/lpoLmnpzmnI3liqHlmajpqozor4HkuI3pgJrov4dcclxuXHQgICAgICBcdFx0aWYoIXRoaXMuc2VydmVyVmFsaWRhdGUoYSxtKSl7XHJcblx0ICAgICAgXHRcdFx0dmFsaWRhdGU9ZmFsc2U7XHJcblx0ICAgICAgXHRcdH1cclxuXHQgICAgICBcdH1lbHNle1xyXG5cdCAgICAgIFx0XHR0aGlzLnJlbW92ZVZhbGlkYXRlTm90aWNlKGEpO1xyXG5cdCAgICAgIFx0fVxyXG5cclxuXHQgICAgICB9ZWxzZXtcclxuXHQgICAgICBcdGlmKHR5cGVvZiBtLm5vdGljZSA9PSAnb2JqZWN0Jyl7XHJcblx0ICAgICAgXHRcdHRoaXMudmFsaWRhdGVOb3RpY2UoYSxtLm5vdGljZVtlcnJUeXBlXSk7XHJcblx0ICAgICAgXHR9ZWxzZXtcclxuXHQgICAgICBcdFx0dGhpcy52YWxpZGF0ZU5vdGljZShhLG0ubm90aWNlKTtcclxuXHQgICAgICBcdH1cclxuXHQgICAgICB9XHJcblxyXG5cclxuXHQgICAgIGlmKHZhbGlkYXRlKXtcclxuXHRcdFx0dGhpcy5pbGxlZ2FsQXJyYXlbYS5pZF09dHJ1ZTtcclxuXHRcdFx0bGV0IGFsbElsbGVnYWw9dGhpcy5pbGxlZ2FsQXJyYXkuZXZlcnkoZnVuY3Rpb24oYSl7XHJcblx0XHRcdFx0aWYoYSl7XHJcblx0XHRcdFx0XHRyZXR1cm4gYT09dHJ1ZTtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRpZihhbGxJbGxlZ2FsKXtcclxuXHRcdFx0XHR0aGlzLm9wdGlvbi5zdWJtaXRCdXR0b24uZGlzcGF0Y2hFdmVudCh0aGlzLmVuYWJsZUV2ZW50KTtcclxuXHRcdFx0fVxyXG5cdFx0fWVsc2V7XHJcblx0XHRcdHRoaXMuaWxsZWdhbEFycmF5W2EuaWRdPWZhbHNlO1xyXG5cdFx0XHR0aGlzLm9wdGlvbi5zdWJtaXRCdXR0b24uZGlzcGF0Y2hFdmVudCh0aGlzLmRpc2FibGVFdmVudCk7XHJcblx0XHR9XHRcdFx0XHJcblxyXG5cdCAgICAgIHJldHVybiB2YWxpZGF0ZTtcclxuXHR9XHJcblxyXG5cdHNlcnZlclZhbGlkYXRlKGVsLG1vZGVsKXtcclxuXHRcdEFqYXhbbW9kZWwuYWpheC5tZXRob2RdKG1vZGVsLmFqYXgudXJsLHtbZWwubmFtZV06ZWwudmFsdWV9LChyZXMpID0+IHtcclxuXHJcblx0XHRcdGxldCBub3RpY2U9bW9kZWwuYWpheC5jb2RlW0pTT04ucGFyc2UocmVzKVttb2RlbC5hamF4Lm5hbWVdXTtcclxuXHRcdFx0aWYobm90aWNlKXtcclxuXHRcdFx0XHR0aGlzLnZhbGlkYXRlTm90aWNlKGVsLG5vdGljZSk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHR0aGlzLnJlbW92ZVZhbGlkYXRlTm90aWNlKGVsKTtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblxyXG5cdC8v5qC55o2u5pWw5o2u5qih5Z6L5a+55pW05Liq6KGo5Y2V6L+b6KGM6aqM6K+BXHJcblx0dmFsaWRhdGVGb3JtKCl7XHJcblx0XHRsZXQge21vZGVsfT10aGlzLm9wdGlvbjtcclxuXHJcblx0ICAgIC8v5Y+W5b6X5omA5pyJ5YWD57SgXHJcblx0ICAgIGxldCBpbnB1dHM9dGhpcy5pbnB1dHM7XHJcblx0ICAgIGxldCBhbGxWYWxpZGF0ZT10cnVlO1xyXG5cclxuXHJcblx0ICAgIC8vaW5wdXRz5Li6bm9kZWxpc3TvvIzlnKhpZeS4i+eUqGZvcmVhY2jkvJrmiqXplJlcclxuXHQgICAgZm9yKGxldCBpPTA7IGk8aW5wdXRzLmxlbmd0aDsgaSsrKXtcclxuXHJcblx0ICAgICAgbGV0IGE9aW5wdXRzW2ldO1xyXG5cdCAgICAgIGxldCBtPW1vZGVsW2EubmFtZV07XHJcblxyXG5cclxuXHQgICAgICAvLyDpqozor4Hlrozmr5VcclxuXHQgICAgICBpZighdGhpcy52YWxpZGF0ZURhdGEoYSxtKSl7XHJcblx0ICAgICAgICBpZihhbGxWYWxpZGF0ZSl7XHJcblx0ICAgICAgICAgIGFsbFZhbGlkYXRlPWZhbHNlO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgIH1cclxuXHJcblx0ICAgIH1cclxuXHJcblx0ICAgIHJldHVybiBhbGxWYWxpZGF0ZTtcclxuXHR9XHJcblxyXG5cclxuXHQvL+aYvuekuuaPkOekuuWGheWuuVxyXG5cdHZhbGlkYXRlTm90aWNlKGVsLG5vdGljZSl7XHJcblxyXG5cdFx0bGV0IGRvbU5vdGljZTtcclxuXHRcdGxldCBwYXJlbnQ7XHJcblxyXG5cdFx0aWYodGhpcy5vcHRpb24uaW5saW5lKXtcclxuXHRcdFx0cGFyZW50PWVsLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuXHRcdH1lbHNle1xyXG5cdCAgICBcdHBhcmVudD1lbC5wYXJlbnRFbGVtZW50O1xyXG5cdFx0fVxyXG5cclxuXHRcdGRvbU5vdGljZT1wYXJlbnQucXVlcnlTZWxlY3RvcignLicrdGhpcy5vcHRpb24uY2xhc3NOYW1lKTtcclxuXHJcblxyXG5cdCAgICBpZighZG9tTm90aWNlKXtcclxuXHQgICAgICBkb21Ob3RpY2U9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0ICAgICAgZG9tTm90aWNlLmNsYXNzTmFtZT10aGlzLm9wdGlvbi5jbGFzc05hbWU7XHJcblx0ICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGRvbU5vdGljZSk7XHJcblx0ICAgIH1cclxuXHJcblx0ICAgIGlmKHRoaXMub3B0aW9uLmlubGluZSl7XHJcblx0XHRcdGRvbU5vdGljZS5zdHlsZS5kaXNwbGF5PSdpbmxpbmUtYmxvY2snO1xyXG5cdFx0XHRkb21Ob3RpY2Uuc3R5bGUucGFkZGluZz0nMCAxMHB4JztcclxuXHRcdH1cclxuXHJcblx0ICAgIGRvbU5vdGljZS5pbm5lckhUTUw9YDxwIHN0eWxlPVwiYmFja2dyb3VuZDojZmZkN2Q3O1xyXG5cdFx0Y29sb3I6I2Y1NTtcclxuXHRcdGxpbmUtaGVpZ2h0OjI2cHg7XHJcblx0XHRmb250LXNpemU6MTJweDtcclxuXHRcdHRleHQtYWxpZ246bGVmdDtcclxuXHRcdHBhZGRpbmc6IDAgMTBweDtcclxuICAgIFx0Ym9yZGVyLXJhZGl1czogMnB4O1xyXG4gICAgXHRib3JkZXI6IDFweCBzb2xpZCAjZmZjOGM4O1wiPiR7bm90aWNlfTwvcD5gO1xyXG5cclxuXHR9XHJcblxyXG5cdC8v56e76Zmk5o+Q56S6XHJcblx0cmVtb3ZlVmFsaWRhdGVOb3RpY2UoZWwpe1xyXG5cdFx0bGV0IHBhcmVudDtcclxuXHRcdGlmKHRoaXMub3B0aW9uLmlubGluZSl7XHJcblx0XHRcdHBhcmVudD1lbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cGFyZW50PWVsLnBhcmVudEVsZW1lbnQ7XHJcblx0XHR9XHJcblx0XHRsZXQgZG9tTm90aWNlPXBhcmVudC5xdWVyeVNlbGVjdG9yKCcuJyt0aGlzLm9wdGlvbi5jbGFzc05hbWUpO1xyXG5cdFx0aWYoZG9tTm90aWNlKXtcclxuXHRcdFx0cGFyZW50LnJlbW92ZUNoaWxkKGRvbU5vdGljZSk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXX0=
